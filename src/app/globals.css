@import "tailwindcss";
@import "tw-animate-css";

/* Pop-A-Lock Custom Styles */
body {
  font-family: var(--font-geist-sans), system-ui, sans-serif;
}

/* Magic UI Animations */
@keyframes marquee {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(calc(-100% - var(--gap)));
  }
}

@keyframes marquee-vertical {
  from {
    transform: translateY(0);
  }
  to {
    transform: translateY(calc(-100% - var(--gap)));
  }
}

.animate-marquee {
  animation: marquee var(--duration) linear infinite;
}

.animate-marquee-vertical {
  animation: marquee-vertical var(--duration) linear infinite;
}

@keyframes meteor-effect {
  0% {
    transform: rotate(215deg) translateX(0);
    opacity: 1;
  }
  70% {
    opacity: 1;
  }
  100% {
    transform: rotate(215deg) translateX(-500px);
    opacity: 0;
  }
}

.animate-meteor-effect {
  animation: meteor-effect linear infinite;
}

/* Keep shadcn/ui variables for components but don't override base styles */
@layer base {
  :root {
    --radius: 0.65rem;
    --background: oklch(1 0 0);
    --foreground: oklch(0.141 0.005 285.823);
    --card: oklch(1 0 0);
    --card-foreground: oklch(0.141 0.005 285.823);
    --popover: oklch(1 0 0);
    --popover-foreground: oklch(0.141 0.005 285.823);
    --primary: oklch(0.62 0.27 35);
    --primary-foreground: oklch(1 0 0);
    --secondary: oklch(0.967 0.001 286.375);
    --secondary-foreground: oklch(0.21 0.006 285.885);
    --muted: oklch(0.967 0.001 286.375);
    --muted-foreground: oklch(0.552 0.016 285.938);
    --accent: oklch(0.967 0.001 286.375);
    --accent-foreground: oklch(0.21 0.006 285.885);
    --destructive: oklch(0.577 0.245 27.325);
    --border: oklch(0.92 0.004 286.32);
    --input: oklch(0.92 0.004 286.32);
    --ring: oklch(0.705 0.213 47.604);
    --chart-1: oklch(0.646 0.222 41.116);
    --chart-2: oklch(0.6 0.118 184.704);
    --chart-3: oklch(0.398 0.07 227.392);
    --chart-4: oklch(0.828 0.189 84.429);
    --chart-5: oklch(0.769 0.188 70.08);
    --sidebar: oklch(0.985 0 0);
    --sidebar-foreground: oklch(0.141 0.005 285.823);
    --sidebar-primary: oklch(0.705 0.213 47.604);
    --sidebar-primary-foreground: oklch(0.98 0.016 73.684);
    --sidebar-accent: oklch(0.967 0.001 286.375);
    --sidebar-accent-foreground: oklch(0.21 0.006 285.885);
    --sidebar-border: oklch(0.92 0.004 286.32);
    --sidebar-ring: oklch(0.705 0.213 47.604);
  }

  .dark {
    --background: oklch(0.141 0.005 285.823);
    --foreground: oklch(0.985 0 0);
    --card: oklch(0.21 0.006 285.885);
    --card-foreground: oklch(0.985 0 0);
    --popover: oklch(0.21 0.006 285.885);
    --popover-foreground: oklch(0.985 0 0);
    --primary: oklch(0.646 0.222 41.116);
    --primary-foreground: oklch(0.98 0.016 73.684);
    --secondary: oklch(0.274 0.006 286.033);
    --secondary-foreground: oklch(0.985 0 0);
    --muted: oklch(0.274 0.006 286.033);
    --muted-foreground: oklch(0.705 0.015 286.067);
    --accent: oklch(0.274 0.006 286.033);
    --accent-foreground: oklch(0.985 0 0);
    --destructive: oklch(0.704 0.191 22.216);
    --border: oklch(1 0 0 / 10%);
    --input: oklch(1 0 0 / 15%);
    --ring: oklch(0.646 0.222 41.116);
    --chart-1: oklch(0.488 0.243 264.376);
    --chart-2: oklch(0.696 0.17 162.48);
    --chart-3: oklch(0.769 0.188 70.08);
    --chart-4: oklch(0.627 0.265 303.9);
    --chart-5: oklch(0.645 0.246 16.439);
    --sidebar: oklch(0.21 0.006 285.885);
    --sidebar-foreground: oklch(0.985 0 0);
    --sidebar-primary: oklch(0.646 0.222 41.116);
    --sidebar-primary-foreground: oklch(0.98 0.016 73.684);
    --sidebar-accent: oklch(0.274 0.006 286.033);
    --sidebar-accent-foreground: oklch(0.985 0 0);
    --sidebar-border: oklch(1 0 0 / 10%);
    --sidebar-ring: oklch(0.646 0.222 41.116);
  }
}

/* Mobile touch and responsive improvements */
@layer utilities {
  /* Mobile touch optimization */
  .touch-manipulation {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }

  /* Enhanced touch targets for mobile */
  @media (max-width: 768px) {
    /* Primary interactive elements */
    button,
    a,
    [role="button"],
    .cursor-pointer,
    .clickable {
      min-height: 44px;
      min-width: 44px;
      touch-action: manipulation;
      -webkit-tap-highlight-color: transparent;
      padding: 0.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Form controls with proper touch targets */
    input[type="checkbox"],
    input[type="radio"] {
      min-height: 44px;
      min-width: 44px;
      transform: scale(1.5);
      margin: 0.5rem;
    }

    /* File input styling for mobile */
    input[type="file"] {
      min-height: 44px;
      padding: 0.75rem;
    }

    /* Image gallery touch optimization */
    .image-gallery img,
    .photo-grid img {
      touch-action: manipulation;
      user-select: none;
      -webkit-user-select: none;
    }

    /* Modal and overlay touch handling */
    .modal-overlay,
    .overlay {
      touch-action: none;
    }

    /* Prevent 300ms tap delay on mobile */
    * {
      touch-action: manipulation;
    }

    /* Improve mobile scrolling performance */
    .overflow-y-auto,
    .overflow-auto,
    .scrollable {
      -webkit-overflow-scrolling: touch;
      overscroll-behavior: contain;
    }

    /* Fix iOS zoom on input focus */
    input[type="text"],
    input[type="email"],
    input[type="password"],
    input[type="number"],
    input[type="tel"],
    textarea,
    select {
      font-size: 16px;
      -webkit-appearance: none;
      border-radius: var(--radius);
    }

    /* Mobile-specific spacing and layout */
    .mobile-spacing {
      padding: 1rem;
      margin-bottom: 1rem;
    }

    /* Bottom navigation safe area */
    .bottom-nav-safe {
      padding-bottom: env(safe-area-inset-bottom);
      padding-bottom: max(env(safe-area-inset-bottom), 1rem);
    }

    /* Prevent text selection on mobile UI elements */
    .ui-element,
    .sidebar,
    .navigation,
    .toolbar {
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    /* Photo submission modal mobile optimization */
    .photo-modal {
      max-height: 90vh;
      overflow-y: auto;
    }

    .photo-upload-area {
      min-height: 120px;
      border: 2px dashed;
      border-radius: var(--radius);
      touch-action: manipulation;
    }

    /* Swipe gesture support for photo galleries */
    .swipeable {
      touch-action: pan-x;
      user-select: none;
    }

    /* Enhanced mobile forms */
    .form-group {
      margin-bottom: 1.5rem;
    }

    .form-label {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
      display: block;
    }

    /* Mobile button groups */
    .button-group {
      display: flex;
      gap: 0.75rem;
      flex-wrap: wrap;
    }

    .button-group button {
      flex: 1;
      min-width: 120px;
    }
  }

  /* Tablet-specific optimizations */
  @media (min-width: 769px) and (max-width: 1024px) {
    .tablet-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
    }

    .tablet-spacing {
      padding: 1.5rem;
    }
  }

  /* PWA and mobile app enhancements */
  @media (display-mode: standalone) {
    /* PWA status bar handling */
    .status-bar-safe {
      padding-top: env(safe-area-inset-top);
    }

    /* Hide browser chrome elements in PWA */
    .browser-only {
      display: none;
    }

    /* PWA navigation */
    .pwa-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 50;
      background: var(--background);
      border-top: 1px solid var(--border);
      padding-bottom: env(safe-area-inset-bottom);
    }
  }

  /* Performance optimizations for mobile */
  .mobile-optimized {
    will-change: transform;
    transform: translateZ(0);
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
  }

  /* Loading states for mobile */
  .mobile-loading {
    touch-action: none;
    pointer-events: none;
    opacity: 0.6;
  }

  /* Accessibility improvements for mobile */
  @media (prefers-reduced-motion: no-preference) {
    .mobile-animation {
      transition: all 0.2s ease-out;
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .mobile-animation {
      transition: none;
    }
  }

  /* Hide any avatar fallback elements or floating "N" circles */
  /* Hide common avatar fallback patterns */
  [data-avatar-fallback],
  [class*="avatar-fallback"],
  [data-testid*="avatar-fallback"],
  [id*="avatar-fallback"] {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
  }

  /* Hide elements with common single-letter avatar patterns */
  .rounded-full.bg-gray-800:is([class*="w-7"], [class*="w-8"], [class*="h-7"], [class*="h-8"]),
  .rounded-full.bg-neutral-800:is([class*="w-7"], [class*="w-8"], [class*="h-7"], [class*="h-8"]),
  .rounded-full.bg-slate-800:is([class*="w-7"], [class*="w-8"], [class*="h-7"], [class*="h-8"]),
  .rounded-full.bg-zinc-800:is([class*="w-7"], [class*="w-8"], [class*="h-7"], [class*="h-8"]) {
    display: none !important;
  }

  /* Hide small circular elements that are likely avatar fallbacks */
  div[style*="width: 28px"][style*="height: 28px"][style*="border-radius"],
  div[style*="width: 32px"][style*="height: 32px"][style*="border-radius"],
  span[style*="width: 28px"][style*="height: 28px"][style*="border-radius"],
  span[style*="width: 32px"][style*="height: 32px"][style*="border-radius"] {
    display: none !important;
  }
}

/* Tech Pages Mobile Optimization */
@media (max-width: 768px) {
  /* Ensure all touch targets are at least 44x44px (Apple guideline) */
  .tech-touch-target,
  button:not(.tech-button-small),
  a[role="button"] {
    min-height: 44px;
    min-width: 44px;
  }

  /* Mobile-friendly spacing for tech dashboard */
  .tech-mobile-card {
    padding: 1rem;
    margin-bottom: 1rem;
  }

  /* Optimize photo capture button for mobile */
  .camera-button {
    min-height: 56px;
    font-size: 1.125rem;
    padding: 0.75rem 1.5rem;
  }

  /* Photo editor full-screen on mobile */
  .photo-editor-mobile {
    position: fixed;
    inset: 0;
    z-index: 9999;
  }

  /* Improve form inputs on mobile */
  input[type="text"],
  input[type="email"],
  input[type="tel"],
  textarea,
  select {
    font-size: 16px; /* Prevents zoom on iOS */
    min-height: 44px;
  }

  /* Mobile-optimized grid for stats */
  .stats-grid-mobile {
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 0.75rem;
  }

  /* Safe area support for notched devices */
  .safe-area-inset {
    padding-top: max(env(safe-area-inset-top), 0px);
    padding-bottom: max(env(safe-area-inset-bottom), 16px);
    padding-left: max(env(safe-area-inset-left), 0px);
    padding-right: max(env(safe-area-inset-right), 0px);
  }

  /* Prevent iOS zoom on double-tap */
  .no-zoom {
    touch-action: manipulation;
  }
}

/* Landscape orientation optimizations for phones */
@media (max-height: 500px) and (orientation: landscape) {
  .tech-header {
    padding: 0.5rem;
  }

  .tech-stats {
    grid-template-columns: repeat(4, 1fr);
    gap: 0.5rem;
  }
}

/* Large touch devices (tablets) */
@media (min-width: 768px) and (max-width: 1024px) and (hover: none) {
  button, a[role="button"] {
    min-height: 48px;
    min-width: 48px;
  }
}

/* PWA standalone mode optimizations */
@media (display-mode: standalone) {
  body {
    padding-top: env(safe-area-inset-top);
  }

  .tech-header {
    padding-top: calc(env(safe-area-inset-top) + 1rem);
  }
}
